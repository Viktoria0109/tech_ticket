<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="{{ request.url_for('static', path='favicon.ico') }}">
    <link rel="stylesheet" href="{{ request.url_for('static', path='/css/style.css') }}">
    <script src="{{ request.url_for('static', path='/js/main.js') }}"></script>
</head>
<body class="body-n">
    <div class="log-wrapper">
        <div class="log-left">
            <h2>С возвращением!</h2>
            <br>
            <p>У Вас нет учетной записи?</p>
            <a href="/register" class="btn-light">Регистрация</a>
        </div>

        <div class="log-right">
            <h2>Вход</h2>
            <form>
                <div class="input-group">
                    <input type="text" placeholder="Email" required>
                </div>
                <div class="input-group">
                    <input type="password" placeholder="Пароль" required>
                </div>
                <button type="submit" class="btn-primary">Вход</button>
            </form>
            <script>
                async function submitLogin() {
                    const email = document.getElementById('email').value;
                    const password = document.getElementById('password').value;
                    const message = document.getElementById('message');

                    const response = await fetch('/login', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ email, password })
                    });

                    const result = await response.json();

                    if (response.ok) {
                        message.style.color = 'green';
                        message.textContent = 'Успешный вход!';
                        // можно сделать redirect: window.location.href = "/dashboard";
                    } else {
                        message.style.color = 'red';
                        message.textContent = result.error || 'Ошибка авторизации';
                    }
                }
            </script>
        </div>
    </div>
</body>